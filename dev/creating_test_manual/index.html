<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Creating test manual and testing it on benchmarks · GSoC Documentation</title><meta name="title" content="Creating test manual and testing it on benchmarks · GSoC Documentation"/><meta property="og:title" content="Creating test manual and testing it on benchmarks · GSoC Documentation"/><meta property="twitter:title" content="Creating test manual and testing it on benchmarks · GSoC Documentation"/><meta name="description" content="Documentation for GSoC Documentation."/><meta property="og:description" content="Documentation for GSoC Documentation."/><meta property="twitter:description" content="Documentation for GSoC Documentation."/><meta property="og:url" content="https://rahban1.github.io/gsoc-documenter/creating_test_manual/"/><meta property="twitter:url" content="https://rahban1.github.io/gsoc-documenter/creating_test_manual/"/><link rel="canonical" href="https://rahban1.github.io/gsoc-documenter/creating_test_manual/"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXXX-X"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-XXXXXXXXX-X', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="GSoC Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">GSoC Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Deliverable Summary</span><ul><li><a class="tocitem" href="../adding_search_benchmarks/">Adding Search Benchmarks</a></li><li class="is-active"><a class="tocitem" href>Creating test manual and testing it on benchmarks</a><ul class="internal"><li><a class="tocitem" href="#Initializing"><span>Initializing</span></a></li><li><a class="tocitem" href="#Running-both-the-benchmarks"><span>Running both the benchmarks</span></a></li><li><a class="tocitem" href="#Creating-different-modules-on-which-to-test"><span>Creating different modules on which to test</span></a></li><li><a class="tocitem" href="#Added-in-the-CI-also"><span>Added in the CI also</span></a></li><li><a class="tocitem" href="#Changes-in-the-Makefile"><span>Changes in the Makefile</span></a></li><li><a class="tocitem" href="#Reference-values-for-the-test_edge_cases.jl"><span>Reference values for the <code>test_edge_cases.jl</code></span></a></li></ul></li><li><a class="tocitem" href="../improving_tokenizer/">Updating Tokenizer</a></li><li><a class="tocitem" href="../warn_when_si_big/">Warn when the search index is too big</a></li><li><a class="tocitem" href="../listing_in_si/">Proper listings in Search Index</a></li><li><a class="tocitem" href="../dev_docs_for_search/">Documenter.jl Search System Developer Documentation</a></li></ul></li><li><span class="tocitem">Additionals</span><ul><li><a class="tocitem" href="../key_bindings/">Navigate the Search Results using up and down keys</a></li></ul></li><li><a class="tocitem" href="../conclusion/">Conclusion</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Deliverable Summary</a></li><li class="is-active"><a href>Creating test manual and testing it on benchmarks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Creating test manual and testing it on benchmarks</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Rahban1/gsoc-documenter" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Rahban1/gsoc-documenter/blob/main/docs/src/creating_test_manual.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Creating-test-manual-and-testing-it-on-benchmarks"><a class="docs-heading-anchor" href="#Creating-test-manual-and-testing-it-on-benchmarks">Creating test manual and testing it on benchmarks</a><a id="Creating-test-manual-and-testing-it-on-benchmarks-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-test-manual-and-testing-it-on-benchmarks" title="Permalink"></a></h1><h3 id="Relevant-PR-:-[#2757](https://github.com/JuliaDocs/Documenter.jl/pull/2757)"><a class="docs-heading-anchor" href="#Relevant-PR-:-[#2757](https://github.com/JuliaDocs/Documenter.jl/pull/2757)">Relevant PR : <a href="https://github.com/JuliaDocs/Documenter.jl/pull/2757">#2757</a></a><a id="Relevant-PR-:-[#2757](https://github.com/JuliaDocs/Documenter.jl/pull/2757)-1"></a><a class="docs-heading-anchor-permalink" href="#Relevant-PR-:-[#2757](https://github.com/JuliaDocs/Documenter.jl/pull/2757)" title="Permalink"></a></h3><p>My mentor suggested that it will be much more logical and understandable if we create a custom manual and seperate tests for it so that it is clear what we are testing and what expected docs should be </p><h2 id="Initializing"><a class="docs-heading-anchor" href="#Initializing">Initializing</a><a id="Initializing-1"></a><a class="docs-heading-anchor-permalink" href="#Initializing" title="Permalink"></a></h2><p>So I started by creating a new file edge<em>case</em>queries.jl which will have all the testcases, the same struct </p><pre><code class="language-Julia hljs">struct TestQuery
    query::String
    expected_docs::Vector{String}
end</code></pre><p>and then I start writing tests, I wrote tests for </p><ul><li>content queries that would be considered atypical</li><li>queries for structural cases</li><li>queries for markdown</li><li>queries for common words</li><li>autodocs queries</li><li>cross reference queries</li><li>doctests queries</li><li>table queries</li></ul><p>now in evaluate.jl and real_search.jl, I have to do changes in the existing functions so that it takes in the search index path as we will now send different search indexes one for this edge case and one for the original documenter docs</p><h2 id="Running-both-the-benchmarks"><a class="docs-heading-anchor" href="#Running-both-the-benchmarks">Running both the benchmarks</a><a id="Running-both-the-benchmarks-1"></a><a class="docs-heading-anchor-permalink" href="#Running-both-the-benchmarks" title="Permalink"></a></h2><p>I created a new file <code>run_all_benchmarks.jl</code> which just run the <code>run_benchmarks.jl</code> once for documenter docs and once for the new tests</p><pre><code class="language-Julia hljs">println(&quot;Running all benchmarks...&quot;)

println(&quot;\nRunning benchmarks for default search index...&quot;)
run(`julia $(@__DIR__)/run_benchmarks.jl $(@__DIR__)/../../docs/build/search_index.js all_test_queries`)

println(&quot;\nRunning benchmarks for edge case search index...&quot;)
run(`julia $(@__DIR__)/run_benchmarks.jl $(@__DIR__)/../search_edge_cases/build/search_index.js edge_case_queries`)

println(&quot;\nAll benchmarks complete.&quot;)</code></pre><h2 id="Creating-different-modules-on-which-to-test"><a class="docs-heading-anchor" href="#Creating-different-modules-on-which-to-test">Creating different modules on which to test</a><a id="Creating-different-modules-on-which-to-test-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-different-modules-on-which-to-test" title="Permalink"></a></h2><p>I created a seperate directory <code>test/search_edge_cases</code> to have all the related file, it has a simple make.jl which looks like this</p><pre><code class="language-Julia hljs">using Documenter

makedocs(
    root = @__DIR__,
    sitename = &quot;Search Edge Case Tests&quot;,
    format = Documenter.HTML(
        prettyurls = false,
    ),
    pages = [
        &quot;Home&quot; =&gt; &quot;index.md&quot;,
        &quot;Atypical Content&quot; =&gt; &quot;atypical_content.md&quot;,
        &quot;Structural Cases&quot; =&gt; &quot;structural_cases.md&quot;,
        &quot;Markdown Syntax&quot; =&gt; &quot;markdown_syntax.md&quot;,
        &quot;Common Words&quot; =&gt; &quot;common_words.md&quot;,
    ],
    build = &quot;build&quot;,
)</code></pre><p>then created a src directory and created md files for testing purposes</p><h2 id="Added-in-the-CI-also"><a class="docs-heading-anchor" href="#Added-in-the-CI-also">Added in the CI also</a><a id="Added-in-the-CI-also-1"></a><a class="docs-heading-anchor-permalink" href="#Added-in-the-CI-also" title="Permalink"></a></h2><p>We want to run both of these benchmarks in the CI so I added this in the CI.yml file</p><pre><code class="language-yml hljs">- name: Build search edge cases documentation  
  run: |
    cd test/search_edge_cases
    julia --project=. -e &#39;using Pkg; Pkg.instantiate(); Pkg.develop(PackageSpec(path=&quot;../../&quot;))&#39;
    julia --project=. make.jl</code></pre><h2 id="Changes-in-the-Makefile"><a class="docs-heading-anchor" href="#Changes-in-the-Makefile">Changes in the Makefile</a><a id="Changes-in-the-Makefile-1"></a><a class="docs-heading-anchor-permalink" href="#Changes-in-the-Makefile" title="Permalink"></a></h2><p>change the makefile to run the <code>run_all_benchmarks.jl</code> instead of running <code>run_benchmarks.jl</code></p><h2 id="Reference-values-for-the-test_edge_cases.jl"><a class="docs-heading-anchor" href="#Reference-values-for-the-test_edge_cases.jl">Reference values for the <code>test_edge_cases.jl</code></a><a id="Reference-values-for-the-test_edge_cases.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Reference-values-for-the-test_edge_cases.jl" title="Permalink"></a></h2><p>In test/search/edge<em>case</em>benchmark_reference.json I added the reference values based on which we will see if any changes in the search index has improved the search relevance or has made it worse</p><pre><code class="language-JSON hljs">{
  &quot;average_precision&quot;: 37.7,
  &quot;average_recall&quot;: 83.2,
  &quot;average_f1_score&quot;: 43.1
}</code></pre><p>these are the values I got when I run it for the first time, it&#39;s only going to get better from here (hopefully!!!)</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../adding_search_benchmarks/">« Adding Search Benchmarks</a><a class="docs-footer-nextpage" href="../improving_tokenizer/">Updating Tokenizer »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Wednesday 27 August 2025 06:15">Wednesday 27 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
